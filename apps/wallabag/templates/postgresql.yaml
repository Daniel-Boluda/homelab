apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: wallabag-postgres
spec:
  teamId: wallabag

  numberOfInstances: 1

  resources:
    requests:
      cpu: 10m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

  volume:
    size: 1.5Gi
    storageClass: zfs-local-dataset

  users:
    wallabag:
    - superuser
    - createdb
  databases:
    wallabag: wallabag

  dockerImage: ghcr.io/zalando/spilo-15:2.1-p9

  postgresql:
    version: "14"
    parameters:
      archive_mode: 'off'
      max_connections: "4"
      shared_buffers: 32MB
      log_checkpoints: 'off'
      log_connections: 'off'
      log_disconnections: 'off'
      log_lock_waits: 'off'
      log_min_duration_statement: "-1"
      log_statement: none
