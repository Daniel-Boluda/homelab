automation:
  - alias: Turn on entrance light when door opens
    trigger:
      - platform: state
        entity_id: binary_sensor.puerta_entrada
        to: "on"
    action:
      - service: switch.turn_on
        target:
          entity_id: switch.luz_entrada
      - delay:
          seconds: 60
      - service: switch.turn_off
        target:
          entity_id: switch.luz_entrada

  - alias: Notify when door opens
    trigger:
      - platform: state
        entity_id: binary_sensor.puerta_entrada
        to: "on"
    action:
      - service: notify.mobile_app_sm_a256b
        data:
          title: Puerta abierta
          message: "Se ha abierto la puerta de la entrada"

  - alias: Notify when door closes
    trigger:
      - platform: state
        entity_id: binary_sensor.puerta_entrada
        to: "off"
    action:
      - service: notify.mobile_app_sm_a256b
        data:
          title: Puerta cerrada
          message: "Se ha cerrado la puerta de la entrada"

#  - alias: Notify when door closes
#    trigger:
#      - platform: state
#        entity_id: binary_sensor.puerta_entrada
#        to: "off"    
#    action:
#      - service: notify.mobile_app_iphone_de_lucia
#        data:
#          message: Notificacion de prueba
#          title: Acuerdate de que te quiero mucho!
