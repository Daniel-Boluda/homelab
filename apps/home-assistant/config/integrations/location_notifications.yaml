automation:
  - alias: Notificaciones ubicaciones clave con presencia
    trigger:
      # Dani llega a Supera_Rivas
      - platform: zone
        entity_id: person.daniel_boluda_fdez_gmail_com
        zone: zone.supera_rivas
        event: enter
      # Lucia llega a Supera_Rivas
      - platform: zone
        entity_id: person.pizarroservanlucia_gmail_com
        zone: zone.supera_rivas
        event: enter
      # Dani llega a Badminton
      - platform: zone
        entity_id: person.daniel_boluda_fdez_gmail_com
        zone: zone.badminton
        event: enter
      # Dani llega a Home
      - platform: zone
        entity_id: person.daniel_boluda_fdez_gmail_com
        zone: zone.home
        event: enter
      # Lucia llega a Home
      - platform: zone
        entity_id: person.pizarroservanlucia_gmail_com
        zone: zone.home
        event: enter
      # Lucia llega al Hospital GU
      - platform: zone
        entity_id: person.pizarroservanlucia_gmail_com
        zone: zone.hospital_gu
        event: enter
      # Lucia se va del Hospital GU
      - platform: zone
        entity_id: person.pizarroservanlucia_gmail_com
        zone: zone.hospital_gu
        event: leave
    condition: []
    action:
      - choose:
          # Dani llega a Supera_Rivas
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.daniel_boluda_fdez_gmail_com
                zone: zone.supera_rivas
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.pizarroservanlucia_gmail_com
                    state: "zone.supera_rivas"
            sequence:
              - service: notify.mobile_app_iphone_de_lucia
                data:
                  message: "Daniel ha llegado a Supera Rivas."
                  title: "Ubicación"
          # Lucia llega a Supera_Rivas
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.pizarroservanlucia_gmail_com
                zone: zone.supera_rivas
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.daniel_boluda_fdez_gmail_com
                    state: "zone.supera_rivas"
            sequence:
              - service: notify.mobile_app_sm_a256b
                data:
                  message: "Lucía ha llegado a Supera Rivas."
                  title: "Ubicación"
          # Dani llega a Badminton
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.daniel_boluda_fdez_gmail_com
                zone: zone.badminton
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.pizarroservanlucia_gmail_com
                    state: "zone.badminton"
            sequence:
              - service: notify.mobile_app_iphone_de_lucia
                data:
                  message: "Daniel ha llegado a Badminton."
                  title: "Ubicación"
          # Dani llega a Home
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.daniel_boluda_fdez_gmail_com
                zone: zone.home
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.pizarroservanlucia_gmail_com
                    state: "zone.home"
            sequence:
              - service: notify.mobile_app_iphone_de_lucia
                data:
                  message: "Daniel ha llegado a casa."
                  title: "Ubicación"
          # Lucia llega a Home
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.pizarroservanlucia_gmail_com
                zone: zone.home
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.daniel_boluda_fdez_gmail_com
                    state: "zone.home"
            sequence:
              - service: notify.mobile_app_sm_a256b
                data:
                  message: "Lucía ha llegado a casa."
                  title: "Ubicación"
          # Lucia llega al Hospital GU
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.pizarroservanlucia_gmail_com
                zone: zone.hospital_gu
                event: enter
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.daniel_boluda_fdez_gmail_com
                    state: "zone.hospital_gu"
            sequence:
              - service: notify.mobile_app_sm_a256b
                data:
                  message: "Lucía ha llegado al Hospital GU."
                  title: "Ubicación"
          # Lucia se va del Hospital GU
          - conditions:
              - condition: trigger
                platform: zone
                entity_id: person.pizarroservanlucia_gmail_com
                zone: zone.hospital_gu
                event: leave
              - condition: not
                conditions:
                  - condition: state
                    entity_id: person.daniel_boluda_fdez_gmail_com
                    state: "zone.hospital_gu"
            sequence:
              - service: notify.mobile_app_sm_a256b
                data:
                  message: "Lucía ha salido del Hospital GU."
                  title: "Ubicación"
    mode: single
