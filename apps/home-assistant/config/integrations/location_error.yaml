automation:
  - alias: Gestion permisos localización
    description: >
      Activa o desactiva el usuario según el permiso de ubicación.
    trigger:
      - platform: state
        entity_id: sensor.iphone_de_lucia_location_permission
    action:
      - choose:
          - conditions:
              - condition: template
                value_template: "{{ trigger.to_state.state != 'granted' }}"
            sequence:
              - service: auth.disable_user
                data:
                  user_id: c2f42aa67734489abd9394113e52362f
          - conditions:
              - condition: template
                value_template: "{{ trigger.to_state.state == 'granted' }}"
            sequence:
              - service: auth.enable_user
                data:
                  user_id: c2f42aa67734489abd9394113e52362f
    mode: single
