app-template:
  image:
    repository: githubexporter/github-exporter
    tag: 1.0.5
  env:
    REPOS: rash-sh/rash, pando85/timer, kanidm/kanidm, pando85/homelab
  envFrom:
    - secretRef:
        name: github-exporter
  service:
    main:
      ports:
        http:
          port: &port 9171
  probes:
    liveness: &probe
      custom: true
      spec:
        httpGet:
          path: /
          port: *port
    readiness: *probe

  serviceMonitor:
    main:
      enabled: true
      endpoints:
        - port: http
          scheme: http
          path: /metrics
          interval: 2m
          scrapeTimeout: 30s
  podSecurityContext:
    runAsUser: 995
    runAsGroup: 991
    fsGroup: 991
    fsGroupChangePolicy: "OnRootMismatch"
  resources:
    requests:
      cpu: 10m
      memory: 8Mi
    limits:
      memory: 50Mi

  nodeSelector:
    kubernetes.io/arch: amd64
