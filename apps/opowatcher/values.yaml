app-template:
  controllers:
    opowatcher:
      type: statefulset
      labels:
        backup/retain: quaterly
      annotations: {}
      containers:
        opowatcher:
          image:
            repository: bolferdocker/pythonplaywright
            tag: 1.0.6

          command:
            - python
          args:
            - /app/scripts/opo_watcher_script.py

          envFrom:
            - secretRef:
                name: opowatcher-secrets

          volumeMounts:
            - name: script
              mountPath: /app/scripts
            - name: config
              mountPath: /app/html

          resources:
            requests:
              cpu: 50m
              memory: 400Mi
            limits:
              memory: 1000Mi

  persistence:
    config:
      enabled: true
      existingClaim: config-opowatcher
      globalMounts: []  # ya se monta expl√≠citamente en containers

  volumes:
    - name: script
      configMap:
        name: python-script
