app-template:
  controllers:
    opowatcher:
      type: statefulset
      labels:
        backup/retain: quaterly
      containers:
        opowatcher:
          image:
            repository: bolferdocker/pythonplaywright
            tag: 1.0.6

          command: ["bash", "-c"]
          args:
            - |
              sleep 3600 &&
              python /app/scripts/opo_watcher_script.py

          envFrom:
            - secretRef:
                name: opowatcher-secrets

          resources:
            requests:
              cpu: 50m
              memory: 400Mi
            limits:
              memory: 1000Mi

      additionalVolumes:
        - name: script
          configMap:
            name: python-script
        - name: config
          persistentVolumeClaim:
            claimName: config-opowatcher

      additionalVolumeMounts:
        - name: script
          mountPath: /app/scripts
        - name: config
          mountPath: /app/html

  persistence:
    config:
      enabled: true
      existingClaim: config-opowatcher
      globalMounts: []
