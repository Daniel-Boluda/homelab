# https://github.com/dbuezas/esphome-cc1101
esphome:
  name: ${name}
  friendly_name: ${friendly_name}
  platform: ESP32
  board: esp32dev
  includes:
    - packages/cc1101.h
  libraries:
    - SPI
    - "SmartRC-CC1101-Driver-Lib"

logger:
  level: DEBUG

sensor:
  - platform: custom
    lambda: |-
      auto my_sensor = new CC1101(
        18, // SCK
        19, // MISO
        23, // MOSI
        5, // CSN
        32, // GDO0
        33, // GDO2
        200, // bandwidth_in_khz
        433.92 // freq_in_mhz
      );
      App.register_component(my_sensor);
      return {my_sensor};
    sensors:
      id: transciver
      internal: true

remote_transmitter:
  - pin: GPIO32 # This is GDO0
    carrier_duty_percent: 100%

remote_receiver:
  - pin:
      GPIO33 # This is GDO2
      # on the esp8266 use any of D1,D2,D5,D6,D7,Rx
      # Don't use D3,D4,D8,TX, boot often fails.
      # Can't be D0 or GPIO17 b/c no interrupts
    dump: raw
    memory_blocks: 8
    filter: 255us
binary_sensor:
  - platform: remote_receiver
    name: Garage -1
    raw:
      code: [1440, -1440, 480, -960, 480, -960, 960, -480, 480, -960, 480]
  - platform: remote_receiver
    name: Garage 0
    raw:
      code: [1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 480]
button:
  - platform: template
    name: Garage 0
    on_press:
      # - lambda: get_cc1101(transciver).beginTransmission();
      # - remote_transmitter.transmit_raw:
      #     code: [20000, -19500, 1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 1440, -19500, 1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 960, -480, 480, -960, 960, -480, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 960, -480, 1440, -19500, 1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 960, -480, 480, -960, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 1440, -19500, 1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 1440, -19500, 1440, -1440, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 960, -480, 480, -960, 960, -480, 480, -960, 480, -960, 1440]
      # - lambda: get_cc1101(transciver).endTransmission();
      - lambda: get_cc1101(transciver).beginTransmission();
      - remote_transmitter.transmit_raw:
          code: [1400, -1498, 425, -1011, 432, -989, 435, -1010, 910, -519, 915, -530, 895, -538, 443, -979, 450, -985, 933, -519, 436, -1007, 439, -994, 915, -511, 919, -529, 904, -521, 436, -1010, 435, -1004, 440, -993, 440, -998, 923, -514, 930, -520,
                 911, -518, 433, -1000, 923, -509, 918, -514, 444, -981, 927, -521, 936, -518, 908, -523, 450, -993, 917, -515, 923, -514, 906, -521, 435, -1009, 910, -519, 455, -994, 440, -995, 923, -501, 455, -989, 435, -985, 461, -983, 935, -494, 940, -507, 441,
                 -997, 448, -984, 931, -495, 937, -517, 908, -524, 446, -994, 442, -979, 451, -986, 458, -990, 434, -1010, 911, -518, 439, -995, 443, -998, 447, -985, 906, -521, 460, -991, 911, -518, 456, -972, 921, -536, 443, -976, 925, -522, 436, -1015, 912, -518,
                 433, -1000, 448, -995, 917, -509, 924, -499, 934, -519, 439, -990, 441, -990, 1393, -20000,
                 1418, -1474, 448, -984, 430, -1010, 434, -990, 936, -518, 906, -523, 915, -511, 919, -539, 895, -540, 903, -522, 435, -1014, 435, -991, 434, -1016, 906, -523, 449, -994, 919, -514, 924, -513, 430, -1013, 433, -985, 936, -518, 439, -995,
                 915, -514, 443, -979, 450, -1012, 434, -989, 436, -1009, 911, -519, 914, -529, 441, -996, 420, -1010, 429, -1011, 433, -986, 463, -983, 435, -1003, 905, -525, 446, -994, 919, -530, 903, -523, 435, -1010, 915, -518, 916, -521, 915, -510, 918, -538, 420,
                 -1006, 904, -521, 936, -518, 441, -1001, 439, -995, 895, -538, 442, -1005, 426, -985, 458, -986, 910, -542, 908, -521, 439, -994, 442, -1005, 427, -987, 457, -986, 912, -543, 913, -504, 922, -536, 417, -1001, 926, -524, 911, -519, 438, -991, 460, -976,
                 439, -1018, 917, -509, 448, -986, 906, -521, 460, -989, 439, -993, 441, -999, 1400, -20000,
                 1394, -1509, 416, -1022, 395, -1028, 427, -1009, 910, -519, 914, -518, 915, -531, 919, -513, 444, -979, 928, -523, 435, -990, 935, -517, 914, -527, 891, -538, 443, -1002, 902, -523, 435, -989, 461, -983, 910, -544, 424, -995, 916, -534,
                 895, -540, 428, -986, 457, -988, 911, -519, 439, -1002, 915, -530, 444, -996, 896, -540, 428, -985, 457, -989, 436, -1010, 910, -519, 430, -1024, 419, -995, 919, -540, 426, -1011, 908, -519, 439, -981, 935, -520, 415, -1019, 919, -515, 898, -539, 905,
                 -522, 435, -1011, 911, -518, 440, -994, 441, -999, 448, -984, 430, -1013, 910, -518, 910, -545, 425, -996, 918, -513, 444, -1006, 427, -1013, 433, -986, 435, -1008, 435, -1004, 440, -994, 440, -998, 422, -1008, 429, -1013, 434, -1009, 911, -519, 440,
                 -996, 918, -513, 919, -515, 926, -523, 434, -989, 435, -1016, 435, -1006, 433, -1000, 1390, -20000,
                 1405, -1503, 416, -1021, 417, -1021, 421, -1006, 905, -521, 435, -1008, 434, -1003, 439, -995, 918, -538, 896, -539, 426, -1011, 908, -519, 434, -1005, 914, -529, 441, -997, 423, -1008, 933, -519, 435, -983, 934, -521, 426, -995, 443, -998,
                 448, -1009, 884, -546, 911, -517, 432, -999, 447, -993, 919, -514, 448, -984, 456, -988, 434, -1013, 435, -990, 910, -519, 454, -997, 419, -1019, 420, -1009, 903, -522, 911, -543, 433, -1000, 901, -531, 443, -996, 895, -527, 932, -515, 914, -519, 915,
                 -521, 915, -511, 919, -534, 421, -1009, 907, -521, 936, -518, 433, -1000, 923, -509, 918, -510, 920, -528, 906, -521, 435, -1016, 434, -991, 434, -1003, 440, -995, 444, -998, 421, -1009, 430, -1014, 433, -1010, 434, -983, 433, -1004, 914, -531, 444,
                 -995, 896, -527, 933, -519, 435, -990, 435, -1014, 909, -522, 425, -995, 443, -999, 1399, -20000,
                 1411, -1492, 443, -1005, 426, -986, 457, -990, 910, -519, 433, -1002, 439, -995, 443, -1001, 449, -985, 429, -1013, 910, -519, 434, -1016, 909, -523, 899, -532, 443, -1000, 420, -1008, 430, -1011, 435, -989, 912, -543, 906, -523, 900, -533,
                 444, -997, 922, -514, 904, -522, 912, -544, 908, -521, 424, -1019, 893, -539, 897, -539, 426, -1012, 433, -990, 936, -518, 908, -522, 449, -995, 417, -1000, 450, -987, 457, -987, 436, -1014, 911, -518, 431, -998, 447, -993, 444, -1004, 426, -1012, 434,
                 -990, 435, -1009, 910, -519, 439, -994, 918, -539, 420, -1007, 429, -1012, 909, -518, 434, -1003, 440, -993, 916, -534, 421, -1007, 429, -1010, 435, -1010, 435, -1014, 408, -1004, 429, -1021, 890, -538, 443, -979, 449, -985, 457, -990, 434, -1010, 435,
                 -1015, 908, -521, 900, -532, 443, -995, 896, -539, 929, -495, 935, -518, 440, -1001, 1375]
      - lambda: get_cc1101(transciver).endTransmission();
