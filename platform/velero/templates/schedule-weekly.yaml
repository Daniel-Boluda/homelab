apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: weekly-all
  namespace: velero
spec:
  schedule: 30 2 * * 2
  template:
    includedNamespaces:
      - "*"
    excludedNamespaces:
      - argocd
      - github-exporter
      - http-echo
      - ingress-nginx
      - ingress-nginx-external
      - kube-node-lease
      - kube-public
      - kube-system
      - kured
      - loki
      - metallb-system
      - minio
      - postgres-operator
      - reloader
      - snapscheduler
      - system-upgrade
      - zfs-exporter
      - zfs-localpv
    snapshotVolumes: true
    storageLocation: default
    ttl: 2160h0m0s # 90d
    volumeSnapshotLocations:
      - zfspv-incr
  useOwnerReferencesInBackup: true
