// TODO switch to YAML https://github.com/renovatebot/renovate/issues/7031
{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:base",
    ":preserveSemverRanges"
  ],
  platform: "github",
  username: "renovate85-bot[bot]",
  repositories: ["pando85/homelab"],
  gitAuthor: "Renovate <4646670+renovate85-bot[bot]@users.noreply.github.com>",
  includeForks: true,
  rebaseWhen: "conflicted",
  branchConcurrentLimit: 10,
  commitMessagePrefix: "{{parentDir}}: ",
  timezone: "Europe/Madrid",
  schedule: [
    "after 5am and before 9am on Monday"
    ],
  enabledManagers: [
    "argocd",
    "github-actions",
    "helm-values",
    "helmv3",
    "kustomize",
    "pre-commit",
  ],
  packageRules: [
    {
      matchPackagePatterns: ".*",
      additionalBranchPrefix: "{{parentDir}}-",
      addLabels: ["renovate/{{parentDir}}"],
    },
    {
      "matchPackageNames": ["app-template"],
      "matchUpdateTypes": ["minor", "patch"],
      "matchCurrentVersion": "!/^0/",
      "automerge": true,
      "automergeType": "pr",
      "platformAutomerge": true
    }
  ]
}
