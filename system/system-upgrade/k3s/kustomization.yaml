apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

#resources:
#  - server.yaml
#  - agent.yaml
# TODO: add OS upgrade

commonAnnotations:
  # TODO: https://github.com/rancher/system-upgrade-controller/issues/172
  argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true

patches:
  - patch: |-
      - op: add
        path: /spec/channel
        value: https://update.k3s.io/v1-release/channels/v1.25
    target:
      group: upgrade.cattle.io
      version: v1
      kind: Plan
      name: .*
