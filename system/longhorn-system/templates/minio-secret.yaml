apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: minio-secret
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault
  target:
    name: minio-secret
    template:
      engineVersion: v2
      data:
        AWS_ACCESS_KEY_ID: {{ .access_key }}
        AWS_SECRET_ACCESS_KEY: {{ .secret_key }}
        AWS_ENDPOINTS: https://minio.grigri:9000
        AWS_CERT: |
          -----BEGIN CERTIFICATE-----
          MIIFXjCCBEagAwIBAgIUJclTWYELPTZSRRVSuBOuTb7ux9QwDQYJKoZIhvcNAQEL
          BQAwcTELMAkGA1UEBhMCRVMxDzANBgNVBAgTBk1hZHJpZDEPMA0GA1UEBxMGTWFk
          cmlkMQ8wDQYDVQQKEwZncmlncmkxITAfBgkqhkiG9w0BCQEWEnBhbmRvODU1QGdt
          YWlsLmNvbTEMMAoGA1UEAxMDVlBOMB4XDTIyMDgyNzE5MzM0M1oXDTIzMDkyODE5
          MzMzNVowVzELMAkGA1UEBhMCRVMxDzANBgNVBAgTBk1hZHJpZDEPMA0GA1UEBxMG
          TWFkcmlkMQ8wDQYDVQQKEwZncmlncmkxFTATBgNVBAMTDG1pbmlvLmdyaWdyaTCC
          AiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAMkVLRXlysS8pOqPQnxMMBA3
          ru9sPBUrzkkwwQTNygxvg3cYoGEh/7xsB+eiMTfpEAAJApoh894DALbF0pHu5rRG
          p7S2r6VPnNT5L/R++5byA+BED2jQGqq4iSqyQx/QBkBg0Zk3nk5O+h4uZz4i9+u8
          BNt569NSQeldlke/WyH8GB940DoMDKkpSkTseEW46jhrS6kP1i+AZGo+4NsWBdRS
          A4p4Kohonb367YNGRiq2BpXtycWmr7d0Mgn3tPZ2Fq/couAP71ViqMC2Jui1Q9ci
          IQNW8gKC6D6LgH/MLn8qZyFvnvOeWbwCMWnpPhg0bsE+yO+XCYberp6upCNjCnfi
          i0ZWrXDc8VzlL14ESFiO6YNUq8uwdKJWGHx6RL+NFz+6WAWyRnHJ1m0mWrbaAlet
          39Rd/OyB91WtvV01dk+yYLDuAWvlobrcNjWHziRLpBNtCwvg1O9p7tzDsOWjB5Ps
          0A73aWut7+S61R58M3x5U46erQH2HGpeKhz2fh2jiju16eoW8Jf9SBslNviwX0eU
          8YE+e6dCsYB83Iyjo/Tn26XoGLvIbbN6vz5oXApyUCN04iDm/D+oSFDyqoeoeahE
          S6OYrr2dHj61IGgO8djN+1tBoYKaFWMZATGsCyQMG8u2qMzVYoddZkn0rkwGmOT3
          dAcXv7YlqBMarEOnb8vxAgMBAAGjggEGMIIBAjAOBgNVHQ8BAf8EBAMCA6gwEwYD
          VR0lBAwwCgYIKwYBBQUHAwEwHQYDVR0OBBYEFIYmPdRpVd5H/eP6p3cSF5BmNxUu
          MB8GA1UdIwQYMBaAFBmwRtVkPDh1nHndbYYxk/U4u5OOMEUGCCsGAQUFBwEBBDkw
          NzA1BggrBgEFBQcwAoYpaHR0cHM6Ly92YXVsdC5rOHMuZ3JpZ3JpL3YxL3BraS9n
          cmlncmkvY2EwFwYDVR0RBBAwDoIMbWluaW8uZ3JpZ3JpMDsGA1UdHwQ0MDIwMKAu
          oCyGKmh0dHBzOi8vdmF1bHQuazhzLmdyaWdyaS92MS9wa2kvZ3JpZ3JpL2NybDAN
          BgkqhkiG9w0BAQsFAAOCAQEAqQgstE3chcP7Ziy36twQh73Vd1FRqAb9w9ynPIi/
          J8EkTUUkTntJufKW93z5LgH7467vYkJnLniDapxj9DGowX7GCoOct5PiYF3IZIV8
          ouIdghGdo2p8SIegqG6ljr7L1X1ixYLv9oFARau8xtu6YmVNvNmJs0DfzunmDbOJ
          8L4gRZA6l0GG1HFbo0QqPt2Il8yERHxVGh8RNy/0qscm1OAQ4vE9Bf3pN2pBnk/Z
          E5G7N7ScYKR0fmIWTawUYkQ+sGD7FYsjf6szVQIU3fuUEaNIwo0UajWiYI9+GUAN
          D09HdjcOB0agSvSQID9puUi39Hr3Bll53t6hnlG05qkeOQ==
          -----END CERTIFICATE-----
  data:
    - secretKey: access_key
      remoteRef:
        key: /longhorn/minio
        property: access_key
    - secretKey: secret_key
      remoteRef:
        key: /longhorn/minio
        property: secret_key

